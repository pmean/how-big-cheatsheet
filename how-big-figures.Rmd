---
title: "How-Big-Cheatsheet"
author: "Steve Simon"
date: "September 17, 2016"
output: html_document
---

The first figure illustrates the margins. Start with the assumption that the graph is seven inches by seven inches and that mar=c(5.1, 4.1, 4.1, 2.1) and mai=c(1.02, 0.82, 0.82, 0.42)
which means 5 lines per inch. Also assume that there are 96 pixels per inch.

```{r margins, fig.width=5.25, fig.height=5.25}
x <- function(p) {
  marks <- c(-1, 0, 0.82, 7-0.42, 7, 7)
  p <- ifelse (p < 100, 100, p)
  p <- ifelse (p > 500, 500, p)
  i <- p %/% 100
  w <- (p/100) %% 1
  return((1-w)*marks[i]+w*marks[i+1])
}
y <- function(p) {
  marks <- c(-1, 0, 1.02, 7-0.82, 7, 7)
  if (p < 100) {p <- 100}
  if (p > 500) {p <- 500}
  i <- p %/% 100
  w <- (p/100) %% 1
  return((1-w)*marks[i]+w*marks[i+1])
}
x(c(100,200))
x(100)
x(150)
x(200)
x(400)
x(450)
x(500)
dev.size()
dev.size(units="px")/dev.size()
par("mar")
par("mai")
par("mar")/par("mai")
par("plt")
par("pin")
# test plot
par(mgp=c(1,4,0))
plot(0:1, 0:1, type="n", axes=FALSE, xlab="x", ylab="y")
box()
axis(side=1)
axis(side=2)
title("title")
par(mar=rep(0, 4), xaxs="i", yaxs="i")
plot(c(-1,7), c(-1,7), type="n", axes=FALSE)

# x <- c(
#   0,
#   0+0.41,
#   0+0.82,
#   0+0.82+0.04*(7-0.82-0.42),
#   0+0.82+0.25*(7-0.82-0.42),
#   0+0.82+0.75*(7-0.82-0.42),
#   7-0.42-0.04*(7-0.82-0.42),
#   7-0.42,
#   7-0.21,
#   7)
# y <- c(
#   0,
#   0+0.51,
#   0+1.02,
#   0+1.02+0.04*(7-1.02-0.84),
#   0+1.02+0.25*(7-1.02-0.84),
#   0+1.02+0.75*(7-1.02-0.84),
#   7-0.82-0.04*(7-1.02-0.82),
#   7-0.82,
#   7-0.41,
#   7)

axis(side=1, pos=1.02, at=x(c(304, 396)), labels=rep(" ", 2)) 
axis(side=2, pos=0.82, at=y(c(304, 396)), labels=rep(" ", 2)) 

polygon(
  x=x(c(300, 400, 400, 300)),
  y=y(c(300, 300, 400, 400)),
  density=NA, col="olivedrab1", border=NA)

polygon(
  x=x(c(304, 396, 396, 304)),
  y=y(c(304, 304, 396, 396)),
  density=NA, col="olivedrab", border="black", lty="dotted")

s2 <- " dev.size()[1] (in, cm, px) "
s1 <- "fin[1] (in)"
w <- strwidth(s2)
text(x(325), y(150), paste(s1, s2, sep="\n"))
arrows(x(325)-w/2, y(150), x(100), y(150), len=0.05)
arrows(x(325)+w/2, y(150), x(500), y(150), len=0.05)

segments(x(100), y(190), x(100), y(110))
segments(x(500), y(190), x(500), y(110))

s4 <- " dev.size()[2] (in, cm, px) "
s3 <- "fin[2] (in)"
w <- strwidth(s4)
text(x(150), y(325), paste(s3, s4, sep="\n"), srt=90)
arrows(x(150), y(325)-w/2, x(150), y(100), len=0.05)
arrows(x(150), y(325)+w/2, x(150), y(500), len=0.05)

segments(x(190), y(100), x(110), y(100))
segments(x(190), y(500), x(110), y(500))

s7 <- "usr[1:2] (user)"
s6 <- "plt[1:2] (pct)"
s5 <- "pin[1:2] (in)"
w <- strwidth(s7)
arrows(x(375)-w/2, y(325), x(300), y(325), len=0.05)
arrows(x(375)+w/2, y(325), x(400), y(325), len=0.05)
text(x(375), y(325), paste(s5, s6, s7, sep="\n"))

s10 <- "usr[3:4] (user)"
s9 <- "plt[3:4] (pct)"
s8 <- "pin[3:4] (in)"
h <- 5*strheight(s10)
arrows(x(325), y(375)-h/2, x(325), y(300), len=0.05)
arrows(x(325), y(375)+h/2, x(325), y(400), len=0.05)
text(x(325), y(375), paste(s8, s9, s10, sep="\n"))

arrows  (x(300), y(200), x(300), y(300), length=0.05, code=3)
segments(x(300), y(250), x(320), y(250), length=0.05)
text(    x(320), y(250), "mai[1] (in)\nmar[1] (lines)", adj=0, cex=1.0)

arrows(x(400), y(400), x(400), y(500), length=0.05, code=3)
segments(x(400), y(450), x(375), y(450))
text(x(375), y(450), "mai[3] (in)\nmar[3] (lines)", adj=1, cex=1.0)

arrows(x(200), y(400), x(300), y(400), length=0.05, code=3)
segments(x(250), y(400), x(325), y(450))
text(x(325), y(450), "mai[2] (in)\nmar[2] (lines)", adj=0, cex=1.0)

arrows(x(400), y(300), x(400), y(300), length=0.05, code=3)
segments(x(450), y(300), x(425), y(150))
text(x(425), y(150), "mai[4] (in)\nmar[4] (lines)", adj=1, cex=1.0)

polygon(x=x(c(100, 500, 500, 100)), y=y(c(100, 100, 500, 500)),   lty="dashed")
```
